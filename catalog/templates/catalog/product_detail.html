{% extends 'catalog/base.html' %}
{% block title %} {{ object.product_name }} {% endblock %}
{% block content %}
{% include 'catalog/header.html' %}
{% load my_tags %}

    <div class="card mb-3" style="max-width: 1000px;">
      <div class="row">
        <div class="col-12">
          <img src="{{ object.product_image | media_filter }}" class="card-img-top" alt="..." style="width: 10rem">
        </div>
        <div class="col-12 md-8">
          <div class="card-body">
            <h5 class="card-title">{{object.product_name}}</h5>
            <p class="card-text">{{ object.product_description }}</p>
          </div>
        </div>
        <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
            <p><a class="btn btn-success" href="{% url 'catalog:chosen_categories_list' object.category_id%}">Similar products</a></p>
            {% if user == object.owner %}
            <p><a class="btn btn-success" href="{% url 'catalog:products_update' product.pk %}">Edit product</a></p>
            <p><a class="btn btn-danger" href="{% url 'catalog:product_delete' product.pk %}">Delete Product</a></p>
            {% endif %}
            <a class="btn btn-primary mb-3" href="{% url 'catalog:products_list' %}" >Back to all products</a>

            {% if "catalog.can_unpublish_product" and "catalog.delete_product" in perms and user == object.owner %}
             <form action="{% url 'catalog:product_unpublish' product.pk %}" method="post">
                {% csrf_token %}
                <button class="btn btn-primary mb-3" type="submit">Unpublish</button>
             </form>

            {% elif "catalog.can_unpublish_product" and "catalog.delete_product" in perms %}
                <form action="{% url 'catalog:product_unpublish' product.pk %}" method="post">
                {% csrf_token %}
                <button class="btn btn-primary mb-3" type="submit">Unpublish</button>
                </form>
                <p><a class="btn btn-danger" href="{% url 'catalog:product_delete' product.pk %}">Delete Product</a></p>

          {% endif %}
        </div>
      </div>
    </div>
{% include 'catalog/footer.html' %}
{% endblock %}